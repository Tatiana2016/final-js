!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequired7c6=r),r("iE7OH").register(JSON.parse('{"EVgbq":"index.34fea485.js","lXybR":"amazonLight.f35bcab3.png","kClo5":"amazonLight@2x.de79fedd.png","3V2gF":"bookShop.b59696b7.png","8MGMh":"bookShop@2x.9104d362.png","4MkMx":"appleBooks.3429e6e0.png","9vIiG":"appleBooks@2x.b5c46b94.png","5UbS1":"index.65a25db3.css","01IoP":"shopping-list.ac447fc6.js"}')),r("5FcjD"),r("gb9S7"),r("1sNnH"),r("779dT"),r("3JHuO");var a=r("bpxeT"),c=r("2TvXO"),s=r("dIxxU");function i(){return l.apply(this,arguments)}function l(){return(l=e(a)(e(c).mark((function t(){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://books-backend.p.goit.global/","books/category-list",e.prev=2,e.next=5,s.default.get("".concat("https://books-backend.p.goit.global/").concat("books/category-list"));case 5:return n=e.sent,e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(2),new Error(Notiflix.Notify.failure("Sorry, no results found"));case 12:case"end":return e.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}r("1NCeJ"),r("g4dHS"),r("8Jzjf"),r("3AY1T");a=r("bpxeT"),c=r("2TvXO");var d=r("1NCeJ"),u=r("3AY1T"),p=document.querySelector(".category-list"),f=document.createElement("ul");function g(){return g=e(a)(e(c).mark((function t(){var n,o,r,s;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i();case 3:(n=t.sent)&&n.data&&(o=n.data,r=o.sort((function(e,t){return e.list_name.localeCompare(t.list_name)})),s=r.map((function(e){return'<li><a href="#" data-category="'.concat(e.list_name,'" class="menu-item-light">').concat(e.list_name,"</a></li>")})).join(""),f.insertAdjacentHTML("beforeend",s),f.addEventListener("click",function(){var t=e(a)(e(c).mark((function t(n){var o,r,s,i;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),"A"!==(o=n.target).tagName||!o.classList.contains("menu-item-light")){t.next=9;break}return r=o.getAttribute("data-category"),s=o.innerText,t.next=7,(0,d.getBooksByCategory)(r,s);case 7:(i=t.sent)&&i.data&&((0,u.renderBooks)(i.data,s),document.querySelectorAll(".book button").forEach((function(t){var n;t.addEventListener("click",(n=e(a)(e(c).mark((function t(n){var o,r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.currentTarget.getAttribute("data-book-id"),e.next=3,getBookById(o);case 3:r=e.sent,renderBookDetails(r);case 5:case"end":return e.stop()}}),t)}))),function(e){return n.apply(this,arguments)}))})));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),g.apply(this,arguments)}f.classList.add("menu-category"),f.style.listStyleType="none",p.append(f),function(){g.apply(this,arguments)}(),r("4VyHa"),r("d9RdC"),r("DBCfV"),r("1p89w"),r("8spJF");var m;a=r("bpxeT"),c=r("2TvXO");m=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("4MkMx");var h;h=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("9vIiG");var b;b=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("lXybR");var v;v=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("kClo5");var y;y=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("3V2gF");var k;k=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("8MGMh");var E=document.querySelector(".js-backdrop-modal"),_=document.querySelector(".books-container"),S=document.querySelector("#modals"),x=document.querySelector(".about-book-modal"),H=document.querySelector("#modal-close"),w=document.querySelector(".add-storage-button"),L=document.querySelector(".remove-modal-btn"),N=document.querySelector(".storage-description"),T="storage-data-shop",B=[],O={};function R(){x.classList.add("is-hidden"),E.classList.add("is-hidden")}function A(){return(A=e(a)(e(c).mark((function t(n){var o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.innerHTML="",e.prev=1,e.next=4,q(n);case 4:return o=e.sent,C(),I(o),e.abrupt("return",o);case 10:throw e.prev=10,e.t0=e.catch(1),console.error("Error",e.t0),e.t0;case 14:case"end":return e.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}function q(e){return J.apply(this,arguments)}function J(){return(J=e(a)(e(c).mark((function t(n){var o,r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O={},e.next=4,fetch("https://books-backend.p.goit.global/books/".concat(n));case 4:return o=e.sent,e.next=7,o.json();case 7:return r=e.sent,O={book_image:r.book_image,title:r.title,author:r.author,description:r.description,shopAmazon:r.buy_links[0].url,shopAppleBooks:r.buy_links[1].url,shopBookshop:r.buy_links[4].url,list_name:r.list_name,id:r._id},e.abrupt("return",r);case 12:throw e.prev=12,e.t0=e.catch(0),console.error("Error",e.t0),e.t0;case 16:case"end":return e.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function C(){var e=JSON.parse(localStorage.getItem(T)),t=O.id;if(!e||0===e.length)return w.style.display="block",void(L.style.display="none");e.find((function(e){return e.id===t}))?(w.style.display="none",L.style.display="block"):(w.style.display="block",L.style.display="none")}function I(t){var n=t.book_image,o=t.title,r=t.author,a=t.description,c=t.buy_links[0].url,s=t.buy_links[1].url,i=t.buy_links[4].url,l='\n  <div class = "modal-card-wr">\n  <img src="'.concat(n,'" alt="Book Image" class="image-modal">\n  \n  <div class="info-modal">\n  <div class = "cont-title">\n  <h2 class="title-book-modal">').concat(o,'</h2></div>\n  <p class="author-book-modal"> ').concat(r,'</p>\n  <p class="txt-book-modal">').concat(a||"",'\n  \n\n  <ul class = "modal-shopping-list">\n\n  <li class="modal-shopping-list-amazon">\n  <a href="').concat(c,'" target="_blank"> \n  <img width="62" height="19"\n        src ="').concat(e(b),",").concat(e(v),'" alt = "Amazon"/>\n  </a>\n  </li> \n\n  <li class="modal-shopping-list-apple">\n  <a href="').concat(s,'" target="_blank">\n  <img width="38" height="38"\n        src ="').concat(e(m),",").concat(e(h),' " alt = "Apple"/>\n  </a>\n  </li>\n\n  <li class="modal-shopping-list-book">\n  <a href="').concat(i,'" target="_blank"> \n  <img width="38" height="38"\n        src ="').concat(e(y),",").concat(e(k),'" alt = "Book"/>\n  </a>\n  </li>\n\n</ul>\n</div>\n</div>\n  ');S.innerHTML=l}H.addEventListener("click",R),document.addEventListener("keydown",(function(e){"Escape"===e.key&&R()})),E.addEventListener("click",(function(e){e.target===E&&R()})),_.addEventListener("click",(function(e){if(e.preventDefault(),"IMG"!==e.target.nodeName&&"H3"!==e.target.nodeName&&"P"!==e.target.nodeName)return;x.classList.remove("is-hidden"),E.classList.remove("is-hidden"),function(e){A.apply(this,arguments)}(e.target.closest("li").id)})),w.addEventListener("click",(function(){var e=JSON.parse(localStorage.getItem(T)),t=O;e&&0!==e.length?(e.push(t),localStorage.setItem(T,JSON.stringify(e))):(B.push(t),localStorage.setItem(T,JSON.stringify(B)));N.textContent="Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.",C()})),L.addEventListener("click",(function(){N.textContent="";var e=O.id,t=JSON.parse(localStorage.getItem(T)),n=t.findIndex((function(t){return t.id===e}));t.splice(n,1),localStorage.setItem(T,JSON.stringify(t)),C()}));r("8MBJY"),r("a2hTj");var M=document.getElementById("back-to-top-button");window.addEventListener("scroll",(function(){document.body.scrollTop>250||document.documentElement.scrollTop>250?M.style.display="block":M.style.display="none"})),M.addEventListener("click",(function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}))}();
//# sourceMappingURL=index.34fea485.js.map
